# Поиск по видеоархиву Царского Села

Семантический поиск по транскрипциям видеозаписей музея-заповедника.

---

## Что вам понадобится

- Python 3.9 или выше
- Файлы проекта: `app.py`, папка `faiss_index/`

---

## Инструкция по запуску

### 1. Скопируйте файлы в одну папку

Скопируйте к себе в одну папку:
- `app.py`
- `faiss_index/` (если архив — разархивируйте)

Структура должна быть такой:
```
video_search/
├── app.py
└── faiss_index/
    ├── index.faiss
    └── index.pkl
```

---

### 2. Перейдите в папку через терминал

**macOS / Linux:**
```bash
cd ~/Documents/video_search
```

**Windows (Command Prompt или PowerShell):**
```cmd
cd C:\Users\Username\Documents\video_search
```

Проверьте, что файлы на месте:
```bash
ls          # macOS / Linux
dir         # Windows
```

В выводе должно быть:
```
app.py
faiss_index
```

---

### 3. Создайте виртуальное окружение

**macOS / Linux:**
```bash
python3 -m venv venv
```

**Windows:**
```cmd
python -m venv venv
```

---

### 4. Активируйте виртуальное окружение

**macOS / Linux:**
```bash
source venv/bin/activate
```

**Windows:**
```cmd
venv\Scripts\activate
```

После этого в начале строки терминала должно появиться:
```
(venv)
```

---

### 5. Установите зависимости

```bash
pip install flask langchain langchain-community langchain-huggingface langchain-core langchain-text-splitters faiss-cpu sentence-transformers
```

Подождите несколько минут — будут скачиваться библиотеки.

---

### 6. Запустите приложение

```bash
python app.py
```

Если запуск прошёл успешно, в терминале появится:
```
Загружаю индекс...
Готово!
 * Running on http://127.0.0.1:5002
```

---

### 7. Откройте в браузере

Перейдите по адресу:

**http://localhost:5002**

или

**http://127.0.0.1:5002**

---

## Решение проблем

### Не открывается страница

1. Проверьте, что команда `python app.py` не завершилась с ошибкой
2. Убедитесь, что папка `faiss_index/` лежит рядом с `app.py`
3. Терминал должен оставаться открытым пока работаете с сайтом

### Порт занят

Если видите ошибку "Address already in use", измените порт в последней строке `app.py`:

```python
app.run(debug=True, host='0.0.0.0', port=5003)
```

И откройте http://localhost:5003

### Ошибка "No module named..."

Убедитесь, что:
1. Виртуальное окружение активировано (видно `(venv)` в начале строки)
2. Все зависимости установлены (повторите шаг 5)

### Хочу показать коллегам в той же Wi-Fi сети

1. Узнайте свой IP:
   - macOS: `ipconfig getifaddr en0`
   - Windows: `ipconfig` (ищите IPv4 Address)
2. Коллеги открывают: `http://ваш_ip:5002`

---

## Как это работает

1. Транскрипции видео разбиты на фрагменты (чанки)
2. Каждый фрагмент превращён в вектор (числовое представление смысла)
3. Когда вы вводите запрос — он тоже превращается в вектор
4. Система находит фрагменты с похожими векторами
5. Это семантический поиск: запрос "барокко" найдёт текст про "растреллиевский стиль"

---

## Контакты

Если что-то не работает — пишите!
